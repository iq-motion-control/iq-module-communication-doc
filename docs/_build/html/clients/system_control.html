

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>System Control &mdash; Python API 0.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/IQClear.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">UART Messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/arduino.html">Arduino API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/cpp.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/matlab.html">Matlab API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/python.html">Python API</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_2200.html">Vertiq 2306 2200KV | Speed Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_220.html">Vertiq 2306 220KV | Position Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_8108_150.html">Vertiq 8108 150KV | Speed Module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>System Control</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/clients/system_control.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="system-control">
<h1>System Control<a class="headerlink" href="#system-control" title="Permalink to this headline">¶</a></h1>
<p>System Control allows the user to perform low level tasks on the motor controller’s microcontroller and gather
basic information. The motor’s uptime can be read and set, allowing for flexible timing and synchronizing.
System Control also has a Module ID parameter, which allows motors to be bussed on a single serial line yet
addressed uniquely. System Control is unique since its ID is always 0 even when the Module ID has been
changed.</p>
<div class="section" id="arduino">
<h2>Arduino<a class="headerlink" href="#arduino" title="Permalink to this headline">¶</a></h2>
<p>To use System Control in Arduino, ensure iq module communication.hpp is included. This allows the creation
of a SystemControlClient object. See Table 12 for available messages. All message objects use the Short
Name with a trailing underscore. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the SystemControlClient is:</p>
<div class="highlight-Arduino notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iq_module_communication.hpp&gt;</span><span class="cp"></span>

<span class="n">IqSerial</span> <span class="nf">ser</span><span class="p">(</span><span class="n">Serial2</span><span class="p">);</span>
<span class="n">SystemControlClient</span> <span class="nf">sys</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ser</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>
    <span class="c1">// Initialize Serial (for displaying information on the terminal)</span>
    <span class="nf">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">float</span> <span class="n">sys_time</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ser</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">time_</span><span class="p">,</span><span class="n">sys_time</span><span class="p">))</span>
        <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">sys_time</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c">
<h2>C++<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h2>
<p>To use System Control in C++, include system control client.hpp. This allows the creation
of a SystemControlClient object. See Table 12 for available messages. All message objects use the Short Name with a
trailing underscore. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the SystemControlClient is:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Interfacing with Serial looks different on different machines. Therefore,
this example does not include code for interfacing with the hardware.</p>
<p>For more, see <a class="reference internal" href="../langs/cpp.html#c-full-code"><span class="std std-ref">Full C++ Code Example (w/ LibSerial)</span></a></p>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;generic_interface.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;system_control_client.hpp&quot;</span><span class="cp"></span>

<span class="kt">float</span> <span class="n">time</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="c1">// Make a communication interface object</span>
    <span class="n">GenericInterface</span> <span class="n">com</span><span class="p">;</span>

    <span class="c1">// Make a System Control object with obj_id 0</span>
    <span class="c1">// System Control objects are always obj_id 0</span>
    <span class="n">SystemControlClient</span> <span class="n">system_control</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="c1">// Use the System Control object</span>
    <span class="n">system_control</span><span class="p">.</span><span class="n">time_</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">com</span><span class="p">);</span>

    <span class="c1">// Insert code for interfacing with hardware here</span>
    <span class="c1">// time = system_control.time_.get_reply();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="matlab">
<h2>Matlab<a class="headerlink" href="#matlab" title="Permalink to this headline">¶</a></h2>
<p>To use System Control in Matlab, all IQ communication code must be included in your path. This allows
the creation of a SystemControlClient object. See Table 12 for available messages. All message strings use
the Short Names. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the SystemControlClient is:</p>
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Make a communication interface object</span><span class="w"></span>
<span class="n">com</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">MessageInterface</span><span class="p">(</span>’<span class="n">COM18</span>’<span class="p">,</span><span class="mi">115200</span><span class="p">);</span><span class="w"></span>

<span class="c">% Make a System Control object with obj_id 0</span><span class="w"></span>
<span class="c">% System Control objects are always obj_id 0</span><span class="w"></span>
<span class="n">system_control</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SystemControlClient</span><span class="p">(</span>’<span class="n">com</span>’<span class="p">,</span><span class="n">com</span><span class="p">);</span><span class="w"></span>

<span class="c">% Use the System Control object</span><span class="w"></span>
<span class="nb">time</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">system_control</span><span class="p">.</span><span class="n">get</span><span class="p">(</span>’<span class="nb">time</span>’<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>To use the System Control Client in Python, include <code class="docutils literal notranslate"><span class="pre">iqmotion</span></code> and create a module that has the System Control Client within it’s firmware.
See Table below for available messages. All message strings use the Short Names.
All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the System Control Client is:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iqmotion</span> <span class="k">as</span> <span class="nn">iq</span>

<span class="n">com</span> <span class="o">=</span> <span class="n">iq</span><span class="o">.</span><span class="n">SerialCommunicator</span><span class="p">(</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>
<span class="n">vertiq</span> <span class="o">=</span> <span class="n">iq</span><span class="o">.</span><span class="n">vertiq2306</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">FW</span> <span class="o">=</span> <span class="n">vertiq</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;system_control&quot;</span><span class="p">,</span> <span class="s2">&quot;firmware_version&quot;</span><span class="p">)</span>  <span class="c1"># Firmware Version Number</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Firmware: </span><span class="si">{</span><span class="n">FW</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="message-table">
<h2>Message Table<a class="headerlink" href="#message-table" title="Permalink to this headline">¶</a></h2>
<p>Type ID 5 | System Control</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 6%" />
<col style="width: 16%" />
<col style="width: 12%" />
<col style="width: 9%" />
<col style="width: 5%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sub ID</p></th>
<th class="head"><p>Short Name</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>reboot_program</p></td>
<td><p>set</p></td>
<td></td>
<td></td>
<td><p>Reboots the motor controller with saved values</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>reboot_boot_loader</p></td>
<td><p>set</p></td>
<td></td>
<td></td>
<td><p>Reboots into the boot loader</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>dev_id</p></td>
<td><p>get</p></td>
<td><p>uint16</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>rev_id</p></td>
<td><p>get</p></td>
<td><p>uint16</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>uid1</p></td>
<td><p>get</p></td>
<td><p>uint32</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>uid2</p></td>
<td><p>get</p></td>
<td><p>uint32</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>uid3</p></td>
<td><p>get</p></td>
<td><p>uint32</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>mem_size</p></td>
<td><p>get</p></td>
<td><p>uint16</p></td>
<td><p>Kb</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>build_year</p></td>
<td><p>get</p></td>
<td><p>uint16</p></td>
<td><p>year</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>build_month</p></td>
<td><p>get</p></td>
<td><p>uint8</p></td>
<td><p>mon</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>build_day</p></td>
<td><p>get</p></td>
<td><p>uint8</p></td>
<td><p>day</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>build_hour</p></td>
<td><p>get</p></td>
<td><p>uint8</p></td>
<td><p>hour</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>build_minute</p></td>
<td><p>get</p></td>
<td><p>uint8</p></td>
<td><p>min</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>build_second</p></td>
<td><p>get</p></td>
<td><p>uint8</p></td>
<td><p>s</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>14</p></td>
<td><p>module_id</p></td>
<td><p>get, set, save</p></td>
<td><p>uint8</p></td>
<td><p>id</p></td>
<td><p>The ID used for all obj_id on this module</p></td>
</tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>time</p></td>
<td><p>get, set</p></td>
<td><p>float</p></td>
<td><p>s</p></td>
<td><p>Internal clock time. If unchanged through software this is uptime</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>firmware_version</p></td>
<td><p>get</p></td>
<td><p>uint32</p></td>
<td><p>ver</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>17</p></td>
<td><p>hardware_version</p></td>
<td><p>get, set, save</p></td>
<td><p>uint32</p></td>
<td><p>ver</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>18</p></td>
<td><p>electronics_version</p></td>
<td><p>get, set, save</p></td>
<td><p>uint32</p></td>
<td><p>ver</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>19</p></td>
<td><p>firmware_valid</p></td>
<td><p>get</p></td>
<td><p>uint8</p></td>
<td><p>bool</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, IQ Motion Control.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>