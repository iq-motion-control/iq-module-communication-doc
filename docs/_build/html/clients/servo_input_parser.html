

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Servo Input Parser &mdash; Python API 0.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/IQClear.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">UART Messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/arduino.html">Arduino API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/cpp.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/matlab.html">Matlab API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/python.html">Python API</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_2200.html">Vertiq 2306 2200KV | Speed Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_220.html">Vertiq 2306 220KV | Position Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_8108_150.html">Vertiq 8108 150KV | Speed Module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Servo Input Parser</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/clients/servo_input_parser.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="servo-input-parser">
<h1>Servo Input Parser<a class="headerlink" href="#servo-input-parser" title="Permalink to this headline">¶</a></h1>
<p>The Servo Input Parser is an interface between the Multi Turn Position Controller and the PWM based
inputs like 1-2ms, OneShot, MultiShot, and DShot. This parser allows the user to control how ratiomatic
values from the PWM input are translated. Inputs can be mapped to PWM control, voltage control, velocity
control, and position control. Values are mapped between a minimum value and a maximum value, while
their units are interpreted based on the mapping.</p>
<div class="section" id="arduino">
<h2>Arduino<a class="headerlink" href="#arduino" title="Permalink to this headline">¶</a></h2>
<p>To use Servo Input Parser in Arduino, ensure iq module communication.hpp is included. This allows the
creation of a ServoInputParserClient object. See Table 6 for available messages. All message objects use the
Short Name with a trailing underscore. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the ServoInputParserClient is:</p>
<div class="highlight-Arduino notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iq_module_communication.hpp&gt;</span><span class="cp"></span>

<span class="n">IqSerial</span> <span class="nf">ser</span><span class="p">(</span><span class="n">Serial2</span><span class="p">);</span>
<span class="n">ServoInputParserClient</span> <span class="nf">svo</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ser</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>
    <span class="n">ser</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">svo</span><span class="p">.</span><span class="n">mode_</span><span class="p">,(</span><span class="kr">uint8_t</span><span class="p">)</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// Set to Voltage mode</span>
    <span class="n">ser</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">svo</span><span class="p">.</span><span class="n">mode_</span><span class="p">);</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c">
<h2>C++<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h2>
<p>To use Servo Input Parser in C++, include servo input parser client.hpp. This allows the creation of a
ServoInputParserClient object. See Table 6 for available messages. All message objects use the Short Name
with a trailing underscore. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the ServoInputParserClient is:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Interfacing with Serial looks different on different machines. Therefore,
this example does not include code for interfacing with the hardware.</p>
<p>For more, see <a class="reference internal" href="../langs/cpp.html#c-full-code"><span class="std std-ref">Full C++ Code Example (w/ LibSerial)</span></a></p>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;generic_interface.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;servo_input_parser_client.hpp&quot;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="c1">// Make a communication interface object</span>
    <span class="n">GenericInterface</span> <span class="n">com</span><span class="p">;</span>

    <span class="c1">// Make a Servo Input Parser object with obj_id 0</span>
    <span class="n">ServoInputParserClient</span> <span class="n">svo</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="c1">// Use the Servo Input Parser object</span>
    <span class="n">svo</span><span class="p">.</span><span class="n">mode_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// Position control mode</span>
    <span class="n">svo</span><span class="p">.</span><span class="n">mode_</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">com</span><span class="p">);</span>
    <span class="n">svo</span><span class="p">.</span><span class="n">unit_min_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="o">-</span><span class="n">PI</span><span class="p">);</span>
    <span class="n">svo</span><span class="p">.</span><span class="n">unit_min_</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">com</span><span class="p">);</span>
    <span class="n">svo</span><span class="p">.</span><span class="n">unit_max_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="n">PI</span><span class="p">);</span>
    <span class="n">svo</span><span class="p">.</span><span class="n">unit_max_</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">com</span><span class="p">);</span>

    <span class="c1">// Insert code for interfacing with hardware here</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="matlab">
<h2>Matlab<a class="headerlink" href="#matlab" title="Permalink to this headline">¶</a></h2>
<p>To use Servo Input Parser in Matlab, all IQ communication code must be included in your path. This allows
the creation of a ServoInputParserClient object. See Table 6 for available messages. All message strings use
the Short Names. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the ServoInputParserClient is:</p>
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Make a communication interface object</span><span class="w"></span>
<span class="n">com</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">MessageInterface</span><span class="p">(</span>’<span class="n">COM18</span>’<span class="p">,</span><span class="mi">115200</span><span class="p">);</span><span class="w"></span>
<span class="c">% Make a ServoInputParserClient object with obj_id 0</span><span class="w"></span>
<span class="n">svo</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">ServoInputParserClient</span><span class="p">(</span>’<span class="n">com</span>’<span class="p">,</span><span class="n">com</span><span class="p">);</span><span class="w"></span>
<span class="c">% Use the ServoInputParserClient object</span><span class="w"></span>
<span class="n">svo</span><span class="p">.</span><span class="n">set</span><span class="p">(</span>’<span class="nb">mode</span>’<span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">Position</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="nb">mode</span><span class="w"></span>
<span class="n">svo</span><span class="p">.</span><span class="n">save</span><span class="p">(</span>’<span class="nb">mode</span>’<span class="p">);</span><span class="w"></span>
<span class="n">svo</span><span class="p">.</span><span class="n">set</span><span class="p">(</span>’<span class="n">unit_min</span>’<span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="nb">pi</span><span class="p">);</span><span class="w"></span>
<span class="n">svo</span><span class="p">.</span><span class="n">save</span><span class="p">(</span>’<span class="n">unit_min</span>’<span class="p">);</span><span class="w"></span>
<span class="n">svo</span><span class="p">.</span><span class="n">set</span><span class="p">(</span>’<span class="n">unit_max</span>’<span class="p">,</span><span class="w"> </span><span class="nb">pi</span><span class="p">);</span><span class="w"></span>
<span class="n">svo</span><span class="p">.</span><span class="n">save</span><span class="p">(</span>’<span class="n">unit_max</span>’<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>To use the Servo Input Parser Client in Python, include <code class="docutils literal notranslate"><span class="pre">iqmotion</span></code> and create a module that has the Servo Input Parser Client within it’s firmware.
See Table below for available messages. All message strings use the Short Names.
All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the Servo Input Parser Client is:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iqmotion</span> <span class="k">as</span> <span class="nn">iq</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">com</span> <span class="o">=</span> <span class="n">iq</span><span class="o">.</span><span class="n">SerialCommunicator</span><span class="p">(</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>
<span class="n">vertiq</span> <span class="o">=</span> <span class="n">iq</span><span class="o">.</span><span class="n">vertiq2306</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">firmware</span><span class="o">=</span><span class="s2">&quot;servo&quot;</span><span class="p">)</span>

<span class="c1"># Set Servo Limits</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;servo_input_parser&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>             <span class="c1"># Position Control Mode</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;servo_input_parser&quot;</span><span class="p">,</span> <span class="s2">&quot;unit_min&quot;</span><span class="p">,</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>  <span class="c1"># Min position: -pi</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;servo_input_parser&quot;</span><span class="p">,</span> <span class="s2">&quot;unit_max&quot;</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>   <span class="c1"># Max position:  pi</span>

<span class="c1"># Save Servo Limits</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;servo_input_parser&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">)</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;servo_input_parser&quot;</span><span class="p">,</span> <span class="s2">&quot;unit_min&quot;</span><span class="p">)</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;servo_input_parser&quot;</span><span class="p">,</span> <span class="s2">&quot;unit_max&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="message-table">
<h2>Message Table<a class="headerlink" href="#message-table" title="Permalink to this headline">¶</a></h2>
<p>Type ID 78 | Servo Input Parser</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 11%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 8%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sub ID</p></th>
<th class="head"><p>Short Name</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>mode</p></td>
<td><p>get, set, save</p></td>
<td><p>uint8</p></td>
<td><p>enum</p></td>
<td><p>0 = PWM, 1 = Voltage, 2 = Velocity, 3 = Position</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>unit_min</p></td>
<td><p>get, set, save</p></td>
<td><p>float</p></td>
<td><p>(mode)</p></td>
<td><p>Minimum value.  Unit determined by mode.</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>unit_max</p></td>
<td><p>get, set, save</p></td>
<td><p>float</p></td>
<td><p>(mode)</p></td>
<td><p>Maximum value.  Unit determined by mode.</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, IQ Motion Control.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>