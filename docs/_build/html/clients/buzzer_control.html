

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Buzzer Control &mdash; Python API 0.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/IQClear.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">UART Messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/arduino.html">Arduino API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/cpp.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/matlab.html">Matlab API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/python.html">Python API</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_2200.html">Vertiq 2306 2200KV | Speed Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_220.html">Vertiq 2306 220KV | Position Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_8108_150.html">Vertiq 8108 150KV | Speed Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/fortiq.html">Fortiq M42BLS | Servo Module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Buzzer Control</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/clients/buzzer_control.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="buzzer-control">
<h1>Buzzer Control<a class="headerlink" href="#buzzer-control" title="Permalink to this headline">¶</a></h1>
<p>The Buzzer Control handles all beeps and songs played by the motor. The controls mimic standard MIDI
commands allowing simple translation from MIDI to Buzzer Control commands. The volume max parameter
controls the absolute volume across all notes, measured in volts. To play a note on the buzzer, set the
frequency by sending a ’hz’ command, set a relative volume by sending a ’volume’ command, set a note
length by sending a ’duration’ command, and finally put the controller in note mode by sending ’ctrl note’.</p>
<div class="section" id="arduino">
<h2>Arduino<a class="headerlink" href="#arduino" title="Permalink to this headline">¶</a></h2>
<p>To use the Buzzer Control in Arduino, ensure iq module communication.hpp is included. This allows the
creation of a BuzzerControlClient object. See Table 5 for available messages. All message objects use the
Short Name with a trailing underscore. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the BuzzerControlClient is:</p>
<div class="highlight-Arduino notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iq_module_communication.hpp&gt;</span><span class="cp"></span>

<span class="n">IqSerial</span> <span class="nf">ser</span><span class="p">(</span><span class="n">Serial2</span><span class="p">);</span>
<span class="n">BuzzerControlClient</span> <span class="nf">buz</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ser</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ser</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">buz</span><span class="p">.</span><span class="n">hz_</span><span class="p">,(</span><span class="kr">uint16_t</span><span class="p">)</span><span class="mi">1000</span><span class="p">);</span>
    <span class="n">ser</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">buz</span><span class="p">.</span><span class="n">volume_</span><span class="p">,(</span><span class="kr">uint8_t</span><span class="p">)</span><span class="mi">127</span><span class="p">);</span>
    <span class="n">ser</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">buz</span><span class="p">.</span><span class="n">duration_</span><span class="p">,(</span><span class="kr">uint16_t</span><span class="p">)</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">ser</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">buz</span><span class="p">.</span><span class="n">ctrl_note_</span><span class="p">);</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c">
<h2>C++<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h2>
<p>To use the Buzzer Control in C++, include buzzer control client.hpp. This allows the creation of a
BuzzerControlClient object. See Table 5 for available messages. All message objects use the Short Name with a
trailing underscore. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the BuzzerControlClient is:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Interfacing with Serial looks different on different machines. Therefore,
this example does not include code for interfacing with the hardware.</p>
<p>For more, see <a class="reference internal" href="../langs/cpp.html#c-full-code"><span class="std std-ref">Full C++ Code Example (w/ LibSerial)</span></a></p>
</div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;generic_interface.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;buzzer_control_client.hpp&quot;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="c1">// Make a communication interface object</span>
    <span class="n">GenericInterface</span> <span class="n">com</span><span class="p">;</span>

    <span class="c1">// Make a Buzzer Control object with obj_id 0</span>
    <span class="n">BuzzerControlClient</span> <span class="n">buz</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="c1">// Use the Buzzer Control object</span>
    <span class="n">buz</span><span class="p">.</span><span class="n">hz_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="mi">440</span><span class="p">);</span> <span class="c1">// A4</span>
    <span class="n">buz</span><span class="p">.</span><span class="n">volume_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="mi">127</span><span class="p">);</span> <span class="c1">// Max volume</span>
    <span class="n">buz</span><span class="p">.</span><span class="n">duration_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span> <span class="c1">// 500ms</span>
    <span class="n">buz</span><span class="p">.</span><span class="n">ctrl_note_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">com</span><span class="p">);</span> <span class="c1">// Note mode</span>

    <span class="c1">// Insert code for interfacing with hardware here</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="matlab">
<h2>Matlab<a class="headerlink" href="#matlab" title="Permalink to this headline">¶</a></h2>
<p>To use the Buzzer Contol in Matlab, all IQ communication code must be included in your path. This allows
the creation of a BuzzerControlClient object. See Table 5 for available messages. All message strings use
the Short Names. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the BuzzerControlClient is:</p>
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Make a communication interface object</span><span class="w"></span>
<span class="n">com</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">MessageInterface</span><span class="p">(</span>’<span class="n">COM18</span>’<span class="p">,</span><span class="mi">115200</span><span class="p">);</span><span class="w"></span>

<span class="c">% Make a BuzzerControlClient object with obj_id 0</span><span class="w"></span>
<span class="n">buz</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">BuzzerControlClient</span><span class="p">(</span>’<span class="n">com</span>’<span class="p">,</span><span class="n">com</span><span class="p">);</span><span class="w"></span>

<span class="c">% Use the BuzzerControlClient object</span><span class="w"></span>
<span class="n">buz</span><span class="p">.</span><span class="n">set</span><span class="p">(</span>’<span class="n">hz</span>’<span class="p">,</span><span class="mi">440</span><span class="p">);</span><span class="w"> </span><span class="c">% A4</span><span class="w"></span>
<span class="n">buz</span><span class="p">.</span><span class="n">set</span><span class="p">(</span>’<span class="nb">volume</span>’<span class="p">,</span><span class="mi">127</span><span class="p">);</span><span class="w"> </span><span class="c">% Max volume</span><span class="w"></span>
<span class="n">buz</span><span class="p">.</span><span class="n">set</span><span class="p">(</span>’<span class="nb">duration</span>’<span class="p">,</span><span class="mi">500</span><span class="p">);</span><span class="w"> </span><span class="c">% 500ms</span><span class="w"></span>
<span class="n">buz</span><span class="p">.</span><span class="n">set</span><span class="p">(</span>’<span class="n">ctrl_note</span>’<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>To use the Buzzer Control Client in Python, include <code class="docutils literal notranslate"><span class="pre">iqmotion</span></code> and create a module that has the Buzzer Control Client within it’s firmware.
See Table below for available messages. All message strings use the Short Names.
All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the Buzzer Control Client is:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iqmotion</span> <span class="k">as</span> <span class="nn">iq</span>

<span class="n">com</span> <span class="o">=</span> <span class="n">iq</span><span class="o">.</span><span class="n">SerialCommunicator</span><span class="p">(</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>
<span class="n">vertiq</span> <span class="o">=</span> <span class="n">iq</span><span class="o">.</span><span class="n">Vertiq2306</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">vertiq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;buzzer_control&quot;</span><span class="p">,</span> <span class="s2">&quot;hz&quot;</span><span class="p">,</span> <span class="mi">440</span><span class="p">)</span>         <span class="c1"># A4</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;buzzer_control&quot;</span><span class="p">,</span> <span class="s2">&quot;volume&quot;</span><span class="p">,</span> <span class="mi">127</span><span class="p">)</span>     <span class="c1"># Max Volume</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;buzzer_control&quot;</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>  <span class="c1"># 1000ms</span>
<span class="n">vertiq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;buzzer_control&quot;</span><span class="p">,</span> <span class="s2">&quot;ctrl_note&quot;</span><span class="p">)</span>       <span class="c1"># Start the Note</span>
</pre></div>
</div>
</div>
<div class="section" id="message-table">
<h2>Message Table<a class="headerlink" href="#message-table" title="Permalink to this headline">¶</a></h2>
<p>Type ID 61 | Buzzer Control</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 9%" />
<col style="width: 6%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sub ID</p></th>
<th class="head"><p>Short Name</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>ctrl_mode</p></td>
<td><p>get</p></td>
<td><p>uint8</p></td>
<td><p>enum</p></td>
<td><p>no_change = -1, brake=0, coast=1, note=2, song=3</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>ctrl_brake</p></td>
<td><p>set</p></td>
<td></td>
<td></td>
<td><p>Shorts motor phases, slows motor down dissipating energy in motor</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>ctrl_coast</p></td>
<td><p>set</p></td>
<td></td>
<td></td>
<td><p>Disables all drive circuitry, motor passively coasts</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>ctrl_note</p></td>
<td><p>set</p></td>
<td></td>
<td></td>
<td><p>Must have sent a ‘hz’ and ‘volume’ first</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>volume_max</p></td>
<td><p>get, set, save</p></td>
<td><p>float</p></td>
<td><p>V</p></td>
<td><p>Uses this voltage command for maximum volume</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>hz</p></td>
<td><p>get, set</p></td>
<td><p>uint16</p></td>
<td><p>hz</p></td>
<td><p>Frequency of the note</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>volume</p></td>
<td><p>get, set</p></td>
<td><p>uint8</p></td>
<td><p>0-127</p></td>
<td><p>Individual note volume as fraction of 127</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>duration</p></td>
<td><p>get, set</p></td>
<td><p>uint16</p></td>
<td><p>ms</p></td>
<td><p>Note length.  Assumed max (65535 ms) if not sent.</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, IQ Motion Control.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>