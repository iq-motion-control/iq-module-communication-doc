

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Step Direction Input &mdash; Python API 0.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/IQClear.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">UART Messaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/arduino.html">Arduino API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/cpp.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/matlab.html">Matlab API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../langs/python.html">Python API</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_2200.html">Vertiq 2306 2200KV | Speed Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_220.html">Vertiq 2306 220KV | Position Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_8108_150.html">Vertiq 8108 150KV | Speed Module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Step Direction Input</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/clients/step_direction_input.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="step-direction-input">
<h1>Step Direction Input<a class="headerlink" href="#step-direction-input" title="Permalink to this headline">¶</a></h1>
<p>The Step Direction Input allows the module to accept commands normally used by stepper motor drivers.
One signal line controls the direction of motor rotation, while each rising and falling edge of the other line
advances the motor’s target angle by a user programmable amount. Steps can be as small as 1/65536th of a
rotation (9.5874e-05 radians). Step sizes that are a multiple of 1/65536th of a rotation will be exact, while
non-multiples will be floored to the nearest multiple. There is virtually no upper limit on the step size. Use
negative step sizes if the direction of the motor is reversed from desired.</p>
<div class="section" id="arduino">
<h2>Arduino<a class="headerlink" href="#arduino" title="Permalink to this headline">¶</a></h2>
<p>To use Step Direction Input in Arduino, ensure iq module communication.hpp is included. This allows the
creation of a StepDirectionInputClient object. See Table 7 for available messages. All message objects use
the Short Name with a trailing underscore. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the StepDirectionInputClient is:</p>
<div class="highlight-Arduino notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iq_module_communication.hpp&gt;</span><span class="cp"></span>

<span class="n">IqSerial</span> <span class="nf">ser</span><span class="p">(</span><span class="n">Serial2</span><span class="p">);</span>
<span class="n">StepDirectionInputClient</span> <span class="nf">sdi</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ser</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>
    <span class="n">ser</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">sdi</span><span class="p">.</span><span class="n">angle_step_</span><span class="p">,</span><span class="mf">0.125f</span><span class="p">);</span> <span class="c1">// set to 8 edges per rotation</span>
    <span class="n">ser</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">sdi</span><span class="p">.</span><span class="n">angle_step_</span><span class="p">);</span>
<span class="p">}</span>

<span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="c">
<h2>C++<a class="headerlink" href="#c" title="Permalink to this headline">¶</a></h2>
<p>To use Step Direction Input in C++, include step direction input.hpp. This allows the creation of a
StepDirectionInputClient object. See Table 7 for available messages. All message objects use the Short Name with
a trailing underscore. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the StepDirectionInputClient is:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Interfacing with Serial looks different on different machines. Therefore,
this example does not include code for interfacing with the hardware.</p>
<p>For more, see <a class="reference internal" href="../langs/cpp.html#c-full-code"><span class="std std-ref">Full C++ Code Example (w/ LibSerial)</span></a></p>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;generic_interface.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;step_direction_input_client.hpp&quot;</span><span class="cp"></span>

<span class="kt">float</span> <span class="n">angle_step</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="c1">// Make a communication interface object</span>
    <span class="n">GenericInterface</span> <span class="n">com</span><span class="p">;</span>

    <span class="c1">// Make a Step Direction Input object with obj_id 0</span>
    <span class="n">StepDirectionInputClient</span> <span class="n">step_dir</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="c1">// Use the Step Direction Input object</span>
    <span class="n">step_dir</span><span class="p">.</span><span class="n">angle_step_</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">com</span><span class="p">,</span><span class="mf">2.0f</span><span class="o">*</span><span class="n">PI</span><span class="o">/</span><span class="mf">65536.0f</span><span class="p">);</span> <span class="c1">// Set the minimum step angle</span>
    <span class="n">step_dir</span><span class="p">.</span><span class="n">angle_step_</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">com</span><span class="p">);</span>
    <span class="n">step_dir</span><span class="p">.</span><span class="n">angle_step_</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">com</span><span class="p">);</span>

    <span class="c1">// Insert code for interfacing with hardware here</span>
    <span class="c1">// Read response</span>
    <span class="n">angle_step</span> <span class="o">=</span> <span class="n">step_dir</span><span class="p">.</span><span class="n">angle_step_</span><span class="p">.</span><span class="n">get_reply</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="matlab">
<h2>Matlab<a class="headerlink" href="#matlab" title="Permalink to this headline">¶</a></h2>
<p>To use Step Direction in Matlab, all IQ communication code must be included in your path. This allows the
creation of a StepDirectionInputClient object. See Table 7 for available messages. All message strings use
the Short Names. All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the StepDirectionInputClient is:</p>
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="c">% Make a communication interface object</span><span class="w"></span>
<span class="n">com</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">MessageInterface</span><span class="p">(</span>’<span class="n">COM18</span>’<span class="p">,</span><span class="mi">115200</span><span class="p">);</span><span class="w"></span>

<span class="c">% Make a MultiTurnAngleControlClient object with obj_id 0</span><span class="w"></span>
<span class="n">step_dir</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">StepDirectionInputClient</span><span class="p">(</span>’<span class="n">com</span>’<span class="p">,</span><span class="n">com</span><span class="p">);</span><span class="w"></span>

<span class="c">% Use the StepDirectionInputClient object</span><span class="w"></span>
<span class="n">angle_step</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">step_dir</span><span class="p">.</span><span class="n">get</span><span class="p">(</span>’<span class="n">angle_step</span>’<span class="p">);</span><span class="w"></span>
<span class="n">step_dir</span><span class="p">.</span><span class="n">set</span><span class="p">(</span>’<span class="n">angle_step</span>’<span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="nb">pi</span><span class="o">/</span><span class="mi">65536</span><span class="p">);</span><span class="w"></span>
<span class="n">step_dir</span><span class="p">.</span><span class="n">save</span><span class="p">(</span>’<span class="n">angle_step</span>’<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>To use the Step Direction Input Client in Python, include <code class="docutils literal notranslate"><span class="pre">iqmotion</span></code> and create a module that has the Step Direction Input Client within it’s firmware.
See Table below for available messages. All message strings use the Short Names.
All messages use the standard Get/Set/Save functions.</p>
<p>A minimal working example for the Step Direction Input Client is:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">iqmotion</span> <span class="k">as</span> <span class="nn">iq</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="n">com</span> <span class="o">=</span> <span class="n">iq</span><span class="o">.</span><span class="n">SerialCommunicator</span><span class="p">(</span><span class="s2">&quot;/dev/ttyUSB0&quot;</span><span class="p">)</span>
<span class="n">vertiq</span> <span class="o">=</span> <span class="n">vertiq2306</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">firmware</span><span class="o">=</span><span class="s2">&quot;stepdir&quot;</span><span class="p">)</span>

<span class="n">vertiq</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;step_direction_input&quot;</span><span class="p">,</span> <span class="s2">&quot;angle_step&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">/</span><span class="mi">65536</span><span class="p">))</span>  <span class="c1"># Set min step angle</span>
</pre></div>
</div>
</div>
<div class="section" id="message-table">
<h2>Message Table<a class="headerlink" href="#message-table" title="Permalink to this headline">¶</a></h2>
<p>Type ID 58 | Step Direction Input</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 20%" />
<col style="width: 14%" />
<col style="width: 8%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sub ID</p></th>
<th class="head"><p>Short Name</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>angle</p></td>
<td><p>get, set</p></td>
<td><p>float</p></td>
<td><p>rad</p></td>
<td><p>Current commanded angle</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>angle_step</p></td>
<td><p>get, set, save</p></td>
<td><p>float</p></td>
<td><p>rad</p></td>
<td><p>Angle step per step edge</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, IQ Motion Control.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>