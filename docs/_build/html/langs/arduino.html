

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Arduino API &mdash; Python API 0.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="C++ API" href="cpp.html" />
    <link rel="prev" title="UART Messaging" href="../intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/IQClear.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">UART Messaging</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Arduino API</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp.html">C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="matlab.html">Matlab API</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python API</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_2200.html">Vertiq 2306 2200KV | Speed Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_2306_220.html">Vertiq 2306 220KV | Position Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/vertiq_8108_150.html">Vertiq 8108 150KV | Speed Module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python API</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Arduino API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/langs/arduino.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="arduino-api">
<h1>Arduino API<a class="headerlink" href="#arduino-api" title="Permalink to this headline">¶</a></h1>
<p>The Arduino libraries allow simple <code class="docutils literal notranslate"><span class="pre">get/set/save</span></code> access to all parameters on the modules, which includes the
various control methods to make the modules spin. Please see the official Arduino library installation guide at
<a class="reference external" href="https://www.arduino.cc/en/guide/libraries">https://www.arduino.cc/en/guide/libraries</a>. Using the Library Manager is preferred. Search for “IQ
Module Communication”.  A .zip of the library can also be found at <a class="reference external" href="http://iq-control.com/support">http://iq-control.com/support</a>.</p>
<p>To use the IQ Module Communication library, you must include the library header file (done automatically
by Arduino if you use their Sketch →Include Library →IQ Module Communication), by typing</p>
<p><code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;iq_module_communicaiton.hpp&gt;</span></code></p>
<p>Next make an IqSerial object. You have two options. Use the default constructor to use the default
Serial (also called Serial0) on Arduino by typing</p>
<p><code class="docutils literal notranslate"><span class="pre">IqSerial</span> <span class="pre">ser;</span></code></p>
<p>or select the Serial peripheral of your choice by passing in the Serial object by typing</p>
<p><code class="docutils literal notranslate"><span class="pre">IqSerial</span> <span class="pre">ser(Serial2);</span></code></p>
<p>Next, create a client object to communicate with the motor. Here we’ll talk with the Brushless Drive
Client by typing</p>
<p><code class="docutils literal notranslate"><span class="pre">BrushlessDriveClient</span> <span class="pre">mot(0);</span></code></p>
<p>0 indicates the Module ID. See the System Control Client documentation for more details.</p>
<p>Now we can setup the Arduino and communication. Initialize the IqSerial object by calling begin. The
default begin function will set the baud rate to 115200. If you have changed the motor module’s baud rate,
pass in the non-default baud rate into the begin function.</p>
<div class="highlight-arduino notranslate"><div class="highlight"><pre><span></span><span class="kr">void</span> <span class="nb">setup</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">// Initialize the IqSerial object</span>
   <span class="n">ser</span><span class="p">.</span><span class="nf">begin</span><span class="p">();</span>
   <span class="c1">// Initialize Serial (for displaying information on the terminal)</span>
   <span class="nf">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finally, use the client to talk to the motor. Here we’ll repeatedly send it a low level spin command.</p>
<div class="highlight-arduino notranslate"><div class="highlight"><pre><span></span><span class="kr">void</span> <span class="nb">loop</span><span class="p">()</span> <span class="p">{</span>
   <span class="kr">static</span> <span class="kr">float</span> <span class="n">velocity</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
   <span class="c1">// Send a voltage command of 0.1 volts</span>
   <span class="n">ser</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">mot</span><span class="p">.</span><span class="n">drive_spin_volts_</span><span class="p">,</span><span class="mf">0.1f</span><span class="p">);</span>
   <span class="c1">// Get the velocity. If a response was received...</span>
   <span class="k">if</span><span class="p">(</span><span class="n">ser</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">mot</span><span class="p">.</span><span class="n">obs_velocity_</span><span class="p">,</span><span class="n">velocity</span><span class="p">))</span>
   <span class="p">{</span>
      <span class="c1">// Display the reported velocity</span>
      <span class="nf">Serial</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span><span class="n">velocity</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">get,</span> <span class="pre">set,</span> <span class="pre">and</span> <span class="pre">save</span></code> functions take in a client object.sub object as the first parameter.</p>
<ul class="simple">
<li><p>In <code class="docutils literal notranslate"><span class="pre">get</span></code>, the second parameter is a reference to a value. The get function will put the response from the motor in this value variable. The get function returns a bool, which indicate if it received a response from the motor.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">set</span></code> function takes in the value to be sent as the second parameter. This value must be the datatype expected by the client object.sub object.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">save</span></code> function requires just the client object.sub object.</p></li>
</ul>
<p>For a complete list of client object.sub object and their datatypes, please see the documentation for the
client classes.</p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cpp.html" class="btn btn-neutral float-right" title="C++ API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../intro.html" class="btn btn-neutral float-left" title="UART Messaging" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, IQ Motion Control.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>